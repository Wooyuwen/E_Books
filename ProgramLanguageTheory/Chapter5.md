## 表达式与语句

> 表达式和语句是常规语言里描述计算过程的两个最基本层次，他们描述计算的执行顺序，实现语言的基本操作语义



**引用透明**：表达式的求值对环境没有任何影响。否则表达式具有**副作用**



> 表达式描述计算值的过程，常见控制手段是**优先级**、**括号**等
>
> 语句是命令，基本语句是程序里的基本动作。常规命令式语言中与数据有关的最基本动作主要的就是赋值
>
> 语句层控制提供一批控制结构，每种控制结构产生一种特定的计算流程
>
> > - 产生一些规范的计算序列
> > - 一些机制（如break,continue），用于改变规范的计算序列
>
> 
>
> 程序员可以通过不同结构的组合应用，实现应用所需的特定控制流程
>
> 
>
> 一些语言中，语句和表达式之间的界限模糊
>
> 
>
> 表达式是描述计算的最基本手段
>
> 
>
> 表达式是一种抽象，理解程序里表达式的意义，需要考虑两点：
>
> - 表达式实现的计算过程
> - 表达式的求值过程对运行环境的影响，如果没有影响，称为“引用透明”，否则有“副作用”，如C++中的a++
>
> 
>
> 表达式表示形式：中前后缀，大部分语言采用混合形式。
>
> 
>
> **求值规则**：
>
> > 应用序求值：（先行求值/积极求值）：后序遍历树形结构，先完成各子树的求值，再对运算符求值and/or
> >
> > 正则序求值：（拖延求职/懒求值）：需要用到该部分时再求值（C/C++条件运算符和逻辑运算符）
> >
> > 短路求值：根据运算符左边对象的值可以确定最终结果，不再计算右边的运算对象（逻辑运算&& |）and then, or else
> >
> > 副作用及其实现:程序语言通常规定了变量修改的最晚实现时间



**顺序点** ：变量修改的最晚实现时间

> 编译器保证：顺序点之前的虽有修改都会体现在内存中
>
> 程序执行再两个顺序点之间，就不能保证发生的修改能得到体现



> 不同语言对顺序点有不同的定义，如果语言允许表达式有副作用(大部分)，需要顺序点的概念：
>
> >- 表达式的副作用是否影响到上下文中的其他计算动作(其他表达式的求值)
> >- 从什么时候开始影响?



> c语言的顺序点:
>
> > - 完整表达式的结束位置。
> > - 运算符  &&  ||  ?   (,)第一个运算对象之后
> > - 函数调用中对所有实参和函数名表达式的求值完成之后
>
> 
>
> Java语言的表达式可能有副作用，定义：
>
> > - 运算对象或者参数总是从左到右逐个计算
> > - 每个计算的副作用将立即体现（每个计算动作之后都有顺序点）
>
> 顺序点就是寄存器和内存的同步点，需要把修改过的寄存器内容同步到内存
>
> java程序执行的顺序点大大多于C程序
>
> - 实现效率下降，语义的确定性提高
>
> 
>
> 表达式：代码优化
>
> > 提高程序的执行效率：充分利用寄存器
> >
> > 机器代码：(C,Fortran)
> >
> > 表达式的树形表示(Lisp)
> >
> > 抽象机语言(JVM)
> >
> > 前缀和后缀形式的某种内部表示(Forth)
>
> 
>
> 基本语句：赋值
>
> > 复合赋值运算符



**语句的控制**

> 基本控制结构：循序、选择、循环
>
> 顺序结构：用分号/用begin ... end 或者 { ... }作为界定标志
>
> 选择结构：if 、case(switch)：主要想法：基于证书，得到快速的控制转移
>
> 非确定性控制结构：有意将不同控制路径之间的选择留下来不予确定

